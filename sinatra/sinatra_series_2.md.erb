---
title: Part 2 of Sinatra Series
---
### Intro
* A multi-part series of Sinatra introductory lectures
* Previous section: <%= link_to_topic :sinatra_series_1 %>
* Next Section: NONE YET

#### Goal
* A Web service to access a database
* A REST API
* A Test Suite, TDD
* Sinatra + ActiveRecord

#### Initial API Spec
* `GET /api/users/paul => JSON result
* Properly withold password
* Propertly return key information

#### TDD
* Look at api_test.rb
* Test is for a set of specific API calls, not of the database or other internals of the service
* And before the test runs, it creates a `test fixture` the particular user being looked up
* For the test to run there has to be a database (ActiveRecord) which is not yet set up

#### Database
* Create a migration `rake db:create_migration NAME=create_users`
* Add to the name, password, email and bio fields to the migration
* Create the corresponding ActiveRecord model in model/user.rb
* Create database and migrate, both development and test databases!
* `rake db:create db:migrate RACK_ENV=development`
